<div class="app-container">
  <!-- Mobile Menu Toggle -->
  <button
    class="mobile-menu-toggle"
    *ngIf="authService.isLoggedIn()"
    (click)="toggleSidebar()"
    aria-label="Toggle menu"
  >
    â˜°
  </button>

  <!-- Mobile Overlay -->
  <div
    class="sidebar-overlay"
    *ngIf="sidebarOpen && authService.isLoggedIn()"
    (click)="closeSidebar()"
  ></div>

  <!-- Left Sidebar Navigation -->
  <aside class="sidebar" [class.sidebar-open]="sidebarOpen" *ngIf="authService.isLoggedIn()">
    <div class="sidebar-brand">
      <div>ğŸ›’ CuteCart</div>
      <small class="store-phone" *ngIf="storePhone">ğŸ“ {{ storePhone }}</small>
    </div>

    <ul class="sidebar-nav">
      <li>
        <a routerLink="/dashboard" [class.active]="isActive('/dashboard')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">ğŸ“Š</span>
          <span>Dashboard</span>
        </a>
      </li>
      <li>
        <a routerLink="/billing" [class.active]="isActive('/billing')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">ğŸ’³</span>
          <span>Billing</span>
        </a>
      </li>
      <li>
        <a routerLink="/invoices" [class.active]="isActive('/invoices')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">ğŸ§¾</span>
          <span>Sales</span>
        </a>
      </li>
      <li *ngIf="authService.isManager()">
        <a routerLink="/expenses" [class.active]="isActive('/expenses')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">ğŸ’¸</span>
          <span>Expenses</span>
        </a>
      </li>
      <li *ngIf="authService.isManager()">
        <a routerLink="/staff" [class.active]="isActive('/staff')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">ğŸ‘¥</span>
          <span>Staff</span>
        </a>
      </li>
      <li *ngIf="authService.isManager()">
        <a routerLink="/products" [class.active]="isActive('/products')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">ğŸ“¦</span>
          <span>Products</span>
        </a>
      </li>
      <li *ngIf="authService.isManager()">
        <a routerLink="/backup" [class.active]="isActive('/backup')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">ğŸ”</span>
          <span>Backup</span>
        </a>
      </li>
      <li *ngIf="authService.isAdmin()">
        <a routerLink="/users" [class.active]="isActive('/users')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">ğŸ‘¥</span>
          <span>Users</span>
        </a>
      </li>
      <li *ngIf="authService.isManager()">
        <a routerLink="/settings" [class.active]="isActive('/settings')" class="sidebar-link" (click)="closeSidebarOnMobile()">
          <span class="nav-icon">âš™ï¸</span>
          <span>Settings</span>
        </a>
      </li>
    </ul>

    <div class="logout-section">
      <button (click)="logout()" class="btn btn-danger w-full">
        ğŸšª Logout
      </button>
      <small class="logged-user">{{ authService.getCurrentUser()?.username || 'User' }}</small>
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content" [class.main-content-mobile]="!sidebarOpen">
    <router-outlet></router-outlet>
  </main>
</div>
